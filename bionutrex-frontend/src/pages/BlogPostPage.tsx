import { useState, useEffect } from 'react';\nimport { useParams, Link, Navigate } from 'react-router-dom';\nimport { Calendar, User, Eye, ArrowLeft } from 'lucide-react';\nimport { blogPostAPI } from '@/services/api';\nimport type { BlogPost } from '@/types';\nimport Loading from '@/components/shared/Loading';\n\nexport default function BlogPostPage() {\n  const { slug } = useParams<{ slug: string }>();\n  const [post, setPost] = useState<BlogPost | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    if (slug) {\n      loadPost(slug);\n    }\n  }, [slug]);\n\n  const loadPost = async (postSlug: string) => {\n    try {\n      setLoading(true);\n      const response = await blogPostAPI.getBySlug(postSlug);\n      setPost(response.data);\n      setError(null);\n    } catch (err) {\n      console.error('Error loading blog post:', err);\n      setError('Post no encontrado');\n      \n      // Post de ejemplo como fallback solo para el slug espec칤fico\n      if (postSlug === 'bienvenidos-bionutrex') {\n        setPost({\n          id: '1',\n          title: 'Bienvenidos a BioNutrex',\n          slug: 'bienvenidos-bionutrex',\n          excerpt: 'Conoce m치s sobre nuestra misi칩n y visi칩n en el mundo de la biotecnolog칤a nutricional.',\n          content: `# Bienvenidos a BioNutrex\n\nEn BioNutrex, estamos comprometidos con la excelencia en biotecnolog칤a nutricional. Nuestro equipo de cient칤ficos e investigadores trabaja d칤a a d칤a para desarrollar productos que marquen la diferencia en la salud y bienestar de las personas.\n\n## Nuestra Misi칩n\n\nProporcionar suplementos naturales de la m치s alta calidad, respaldados por ciencia s칩lida y fabricados bajo est치ndares farmac칠uticos.\n\n## Nuestra Visi칩n\n\nSer l칤deres mundiales en innovaci칩n biotecnol칩gica aplicada a la nutrici칩n, contribuyendo a un mundo m치s saludable.\n\n춰Gracias por confiar en BioNutrex!`,\n          imageUrl: '/uploads/blog-default.jpg',\n          author: 'Equipo BioNutrex',\n          published: true,\n          views: 0,\n          createdAt: new Date().toISOString(),\n          updatedAt: new Date().toISOString(),\n          publishedAt: new Date().toISOString()\n        });\n        setError(null);\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString('es-ES', {\n      year: 'numeric',\n      month: 'long',\n      day: 'numeric'\n    });\n  };\n\n  const renderMarkdown = (content: string) => {\n    // Funci칩n simple para renderizar markdown b치sico\n    return content\n      .replace(/^# (.+$)/gm, '<h1 class=\"text-3xl font-bold mb-6 text-[#0d40a5]\">$1</h1>')\n      .replace(/^## (.+$)/gm, '<h2 class=\"text-2xl font-bold mb-4 mt-8 text-[#0d40a5]\">$1</h2>')\n      .replace(/^### (.+$)/gm, '<h3 class=\"text-xl font-bold mb-3 mt-6 text-[#0d40a5]\">$1</h3>')\n      .replace(/\\*\\*(.+?)\\*\\*/g, '<strong class=\"font-bold\">$1</strong>')\n      .replace(/\\*(.+?)\\*/g, '<em class=\"italic\">$1</em>')\n      .replace(/\\n\\n/g, '</p><p class=\"mb-4\">')\n      .replace(/^(?!<h|<p)(.+$)/gm, '<p class=\"mb-4\">$1</p>')\n      .replace(/<p class=\"mb-4\"><\\/p>/g, '')\n      .replace(/^<p class=\"mb-4\">(<h[1-6])/g, '$1');\n  };\n\n  if (loading) {\n    return <Loading />;\n  }\n\n  if (error && !post) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center\">\n        <div className=\"text-center\">\n          <div className=\"text-6xl text-gray-400 mb-4\">游닇</div>\n          <h1 className=\"text-2xl font-bold text-gray-900 mb-2\">Post no encontrado</h1>\n          <p className=\"text-gray-600 mb-6\">El art칤culo que buscas no existe o ha sido eliminado.</p>\n          <Link\n            to=\"/blog\"\n            className=\"inline-flex items-center px-4 py-2 bg-[#0d40a5] text-white rounded-lg hover:bg-[#0d40a5]/90 transition-colors\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Volver al Blog\n          </Link>\n        </div>\n      </div>\n    );\n  }\n\n  if (!post) {\n    return <Navigate to=\"/blog\" replace />;\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      {/* Header */}\n      <div className=\"bg-white border-b border-gray-200\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\n          <Link\n            to=\"/blog\"\n            className=\"inline-flex items-center text-[#0d40a5] hover:text-[#0d40a5]/80 mb-6 transition-colors\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Volver al Blog\n          </Link>\n          \n          <h1 className=\"playfair text-3xl md:text-4xl lg:text-5xl font-bold text-[#0d40a5] mb-4\">\n            {post.title}\n          </h1>\n          \n          <div className=\"raleway flex items-center gap-6 text-sm text-gray-600\">\n            <span className=\"flex items-center gap-1\">\n              <User className=\"w-4 h-4\" />\n              {post.author}\n            </span>\n            \n            <span className=\"flex items-center gap-1\">\n              <Calendar className=\"w-4 h-4\" />\n              {formatDate(post.publishedAt || post.createdAt)}\n            </span>\n            \n            <span className=\"flex items-center gap-1\">\n              <Eye className=\"w-4 h-4\" />\n              {post.views} vistas\n            </span>\n          </div>\n        </div>\n      </div>\n\n      {/* Content */}\n      <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\">\n        <article className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n          {/* Featured Image */}\n          <div className=\"aspect-video bg-gray-200 relative overflow-hidden\">\n            <img\n              src={post.imageUrl}\n              alt={post.title}\n              className=\"w-full h-full object-cover\"\n            />\n          </div>\n          \n          {/* Article Content */}\n          <div className=\"p-8\">\n            {/* Excerpt */}\n            <div className=\"bg-[#0d40a5]/5 border-l-4 border-[#0d40a5] pl-4 py-2 mb-8\">\n              <p className=\"raleway text-lg text-gray-700 italic\">\n                {post.excerpt}\n              </p>\n            </div>\n            \n            {/* Main Content */}\n            <div \n              className=\"raleway prose prose-lg max-w-none text-gray-800 leading-relaxed\"\n              dangerouslySetInnerHTML={{\n                __html: renderMarkdown(post.content)\n              }}\n            />\n            \n            {/* Tags or Categories could go here */}\n            <div className=\"mt-12 pt-8 border-t border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <div>\n                  <p className=\"text-sm text-gray-600\">\n                    Publicado por <strong>{post.author}</strong>\n                  </p>\n                  <p className=\"text-xs text-gray-500\">\n                    {formatDate(post.publishedAt || post.createdAt)}\n                  </p>\n                </div>\n                \n                <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n                  <Eye className=\"w-4 h-4\" />\n                  <span>{post.views} vistas</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </article>\n        \n        {/* Navigation */}\n        <div className=\"mt-8 text-center\">\n          <Link\n            to=\"/blog\"\n            className=\"raleway inline-flex items-center px-6 py-3 bg-[#0d40a5] text-white font-medium rounded-lg hover:bg-[#0d40a5]/90 transition-colors\"\n          >\n            <ArrowLeft className=\"w-4 h-4 mr-2\" />\n            Ver m치s art칤culos\n          </Link>\n        </div>\n      </div>\n    </div>\n  );\n}

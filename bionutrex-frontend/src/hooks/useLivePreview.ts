import { useState, useCallback, useEffect } from 'react';\n\nexport interface LivePreviewState {\n  isOpen: boolean;\n  device: 'mobile' | 'tablet' | 'desktop';\n  currentUrl: string;\n  isFullscreen: boolean;\n  isLoading: boolean;\n  isRefreshing: boolean;\n}\n\nexport function useLivePreview(initialState?: Partial<LivePreviewState>) {\n  const [state, setState] = useState<LivePreviewState>({\n    isOpen: false,\n    device: 'desktop',\n    currentUrl: '/',\n    isFullscreen: false,\n    isLoading: true,\n    isRefreshing: false,\n    ...initialState,\n  });\n\n  const updateState = useCallback((updates: Partial<LivePreviewState>) => {\n    setState(prev => ({ ...prev, ...updates }));\n  }, []);\n\n  const openPreview = useCallback((device?: 'mobile' | 'tablet' | 'desktop', url?: string) => {\n    updateState({\n      isOpen: true,\n      ...(device && { device }),\n      ...(url && { currentUrl: url }),\n      isLoading: true,\n    });\n  }, [updateState]);\n\n  const closePreview = useCallback(() => {\n    updateState({ isOpen: false });\n  }, [updateState]);\n\n  const changeDevice = useCallback((device: 'mobile' | 'tablet' | 'desktop') => {\n    updateState({ device, isLoading: true });\n  }, [updateState]);\n\n  const changeUrl = useCallback((url: string) => {\n    updateState({ currentUrl: url, isLoading: true });\n  }, [updateState]);\n\n  const toggleFullscreen = useCallback(() => {\n    updateState({ isFullscreen: !state.isFullscreen });\n  }, [updateState, state.isFullscreen]);\n\n  const startRefresh = useCallback(() => {\n    updateState({ isRefreshing: true, isLoading: true });\n    // Simular tiempo de refresh\n    setTimeout(() => {\n      updateState({ isRefreshing: false });\n    }, 1000);\n  }, [updateState]);\n\n  const setLoading = useCallback((loading: boolean) => {\n    updateState({ isLoading: loading });\n  }, [updateState]);\n\n  // Keyboard shortcuts handler\n  const handleKeyboard = useCallback((e: KeyboardEvent) => {\n    if (!state.isOpen) return;\n\n    switch (true) {\n      case e.key === 'Escape':\n        closePreview();\n        break;\n      case e.key === 'F5' || (e.ctrlKey && e.key === 'r'):\n        e.preventDefault();\n        startRefresh();\n        break;\n      case e.ctrlKey && ['1', '2', '3'].includes(e.key):\n        e.preventDefault();\n        const devices: ('mobile' | 'tablet' | 'desktop')[] = ['mobile', 'tablet', 'desktop'];\n        changeDevice(devices[parseInt(e.key) - 1]);\n        break;\n      case e.ctrlKey && e.key === 'Enter':\n        e.preventDefault();\n        window.open(state.currentUrl, '_blank');\n        break;\n    }\n  }, [state.isOpen, state.currentUrl, closePreview, startRefresh, changeDevice]);\n\n  // Setup keyboard event listener\n  useEffect(() => {\n    if (state.isOpen) {\n      window.addEventListener('keydown', handleKeyboard);\n      return () => window.removeEventListener('keydown', handleKeyboard);\n    }\n  }, [state.isOpen, handleKeyboard]);\n\n  return {\n    state,\n    actions: {\n      openPreview,\n      closePreview,\n      changeDevice,\n      changeUrl,\n      toggleFullscreen,\n      startRefresh,\n      setLoading,\n    },\n    // Quick access to commonly used state\n    isOpen: state.isOpen,\n    device: state.device,\n    currentUrl: state.currentUrl,\n    isFullscreen: state.isFullscreen,\n    isLoading: state.isLoading,\n    isRefreshing: state.isRefreshing,\n  };\n}\n\nexport default useLivePreview;"
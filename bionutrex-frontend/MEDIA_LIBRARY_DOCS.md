# MediaLibrary - Biblioteca de Medios\n\n## Descripci√≥n\n\nLa **MediaLibrary** es un sistema completo de gesti√≥n de archivos multimedia para el panel de administraci√≥n. Permite subir, organizar, buscar y gestionar im√°genes, videos, documentos y otros tipos de archivos.\n\n## Caracter√≠sticas Principales\n\n### üìÅ **Gesti√≥n de Archivos**\n- ‚úÖ Subida de archivos m√∫ltiples con drag & drop\n- ‚úÖ Soporte para im√°genes (JPG, PNG, GIF, WebP)\n- ‚úÖ Soporte para videos (MP4, AVI, MOV, WebM)\n- ‚úÖ Soporte para documentos (PDF, DOC, TXT)\n- ‚úÖ L√≠mite de 10MB por archivo\n- ‚úÖ Vista previa autom√°tica para im√°genes\n- ‚úÖ Detecci√≥n autom√°tica de dimensiones\n\n### üóÇÔ∏è **Organizaci√≥n**\n- ‚úÖ Sistema de carpetas din√°mico\n- ‚úÖ Creaci√≥n de nuevas carpetas\n- ‚úÖ Filtrado por tipo de carpeta\n- ‚úÖ Tags y etiquetas para archivos\n\n### üîç **B√∫squeda y Filtros**\n- ‚úÖ B√∫squeda en tiempo real por nombre\n- ‚úÖ B√∫squeda por tags/etiquetas\n- ‚úÖ Filtros por carpeta\n- ‚úÖ Vista en grilla y lista\n\n### üìä **Estad√≠sticas en Tiempo Real**\n- ‚úÖ Total de archivos\n- ‚úÖ Espacio utilizado\n- ‚úÖ Contador de carpetas\n- ‚úÖ Contador por tipo de archivo\n\n### ‚ö° **Operaciones Avanzadas**\n- ‚úÖ Selecci√≥n m√∫ltiple\n- ‚úÖ Eliminaci√≥n en lote\n- ‚úÖ Descarga m√∫ltiple\n- ‚úÖ Copia de URLs\n- ‚úÖ Vista previa modal\n\n## Uso del Hook useMediaLibrary\n\n```typescript\nconst {\n  files,          // Array de archivos\n  folders,        // Array de carpetas\n  loading,        // Estado de carga\n  error,          // Mensajes de error\n  uploading,      // Estado de subida\n  uploadProgress, // Progreso 0-100\n  stats,          // Estad√≠sticas\n  loadFiles,      // Recargar archivos\n  uploadFiles,    // Subir archivos\n  deleteFile,     // Eliminar archivo\n  deleteFiles,    // Eliminar m√∫ltiples\n  createFolder,   // Crear carpeta\n  formatFileSize, // Formatear tama√±o\n  getFileType,    // Detectar tipo\n} = useMediaLibrary();\n```\n\n## Integraci√≥n con API\n\n### Endpoints Utilizados\n\n| M√©todo | Endpoint | Descripci√≥n |\n|--------|----------|-------------|\n| GET | `/api/uploads/list` | Lista todos los archivos |\n| POST | `/api/uploads` | Sube un nuevo archivo |\n| DELETE | `/api/uploads/:filename` | Elimina un archivo |\n\n### Estructura de Datos\n\n```typescript\ninterface MediaFile {\n  id: string;\n  name: string;\n  type: \"image\" | \"video\" | \"document\" | \"audio\" | \"archive\";\n  size: number;\n  url: string;\n  thumbnail?: string;\n  uploadDate: string;\n  dimensions?: { width: number; height: number };\n  tags: string[];\n  folder: string;\n}\n\ninterface MediaFolder {\n  id: string;\n  name: string;\n  count: number;\n  size: number;\n  created: string;\n}\n```\n\n## Caracter√≠sticas T√©cnicas\n\n### üöÄ **Performance**\n- Carga as√≠ncrona de archivos\n- Optimizaci√≥n de im√°genes autom√°tica\n- Lazy loading para vistas grandes\n- Debounce en b√∫squedas\n\n### üîí **Seguridad**\n- Validaci√≥n de tipos de archivo\n- L√≠mites de tama√±o configurables\n- Sanitizaci√≥n de nombres de archivo\n- Verificaci√≥n de extensiones\n\n### üì± **Responsive**\n- Adaptable a todos los dispositivos\n- Touch-friendly para m√≥viles\n- Grid responsivo autom√°tico\n- Modaless optimizados\n\n## Manejo de Errores\n\nEl sistema incluye manejo robusto de errores:\n\n- **Errores de red**: Reintentos autom√°ticos\n- **Archivos corruptos**: Validaci√≥n previa\n- **L√≠mites excedidos**: Mensajes descriptivos\n- **Permisos**: Validaci√≥n de acceso\n\n## Estados de Carga\n\n```typescript\n// Estados principales\nloading: boolean;     // Carga inicial\nuploading: boolean;   // Subiendo archivos\nuploadProgress: 0-100; // Progreso de subida\nerror: string | null; // Mensajes de error\n```\n\n## Funciones de Utilidad\n\n```typescript\n// Formateo de tama√±o\nformatFileSize(1024) // \"1 KB\"\nformatFileSize(1048576) // \"1 MB\"\n\n// Detecci√≥n de tipo\ngetFileType(\"image.jpg\") // \"image\"\ngetFileType(\"video.mp4\") // \"video\"\n\n// Estad√≠sticas\nstats.totalFiles    // N√∫mero total\nstats.totalSize     // Tama√±o total en bytes\nstats.imageCount    // Solo im√°genes\nstats.folderCount   // N√∫mero de carpetas\n```\n\n## Ejemplo de Uso Completo\n\n```tsx\nimport useMediaLibrary from './hooks/useMediaLibrary';\n\nfunction MyComponent() {\n  const {\n    files,\n    uploading,\n    uploadFiles,\n    error\n  } = useMediaLibrary();\n\n  const handleUpload = async (fileList: FileList) => {\n    try {\n      await uploadFiles(fileList);\n      console.log('Archivos subidos exitosamente');\n    } catch (err) {\n      console.error('Error:', err);\n    }\n  };\n\n  return (\n    <div>\n      {error && <div className=\"error\">{error}</div>}\n      {uploading && <div>Subiendo...</div>}\n      \n      <input\n        type=\"file\"\n        multiple\n        onChange={(e) => e.target.files && handleUpload(e.target.files)}\n      />\n      \n      <div className=\"files\">\n        {files.map(file => (\n          <div key={file.id}>\n            <img src={file.thumbnail} alt={file.name} />\n            <p>{file.name}</p>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}\n```\n\n## Drag & Drop\n\nEl componente soporta drag & drop nativo:\n\n```tsx\n// Eventos manejados autom√°ticamente\nonDragOver={handleDragOver}    // Previene default\nonDragLeave={handleDragLeave}  // Quita indicadores\nonDrop={handleDrop}            // Procesa archivos\n```\n\n## Reutilizaci√≥n en Otros Componentes\n\nEl hook `useMediaLibrary` puede reutilizarse en:\n\n- **HomeEditor**: Para seleccionar im√°genes de fondo\n- **BlogEditor**: Para insertar im√°genes en art√≠culos\n- **ProductEditor**: Para fotos de productos\n- **ProfileEditor**: Para avatars y fotos\n\n```tsx\n// Ejemplo en HomeEditor\nconst { files, loading } = useMediaLibrary();\nconst images = files.filter(f => f.type === 'image');\n\nreturn (\n  <select>\n    {images.map(img => (\n      <option key={img.id} value={img.url}>\n        {img.name}\n      </option>\n    ))}\n  </select>\n);\n```\n\n## Pr√≥ximas Mejoras\n\n- [ ] Soporte para m√∫ltiples carpetas anidadas\n- [ ] Edici√≥n b√°sica de im√°genes (crop, resize)\n- [ ] Metadatos extendidos (EXIF, autor)\n- [ ] Integraci√≥n con CDN externo\n- [ ] B√∫squeda por contenido (OCR)\n- [ ] Versionado de archivos\n- [ ] Papelera de reciclaje\n\n---\n\n**Desarrollado con:** React + TypeScript + Tailwind CSS + Custom Hooks\n\n**Compatibilidad:** Chrome, Firefox, Safari, Edge (√∫ltimas 2 versiones)"